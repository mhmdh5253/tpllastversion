function gregorian_to_jalali(t,e,a){var i=t<=1600?0:979;t-=t<=1600?621:1600;var n=e>2?t+1:t,r=365*t+parseInt((n+3)/4)-parseInt((n+99)/100)+parseInt((n+399)/400)-80+a+[0,31,59,90,120,151,181,212,243,273,304,334][e-1];return i+=33*parseInt(r/12053),r%=12053,i+=4*parseInt(r/1461),r%=1461,i+=parseInt((r-1)/365),r>365&&(r=(r-1)%365),[i,r<186?1+parseInt(r/31):7+parseInt((r-186)/30),1+(r<186?r%31:(r-186)%30)]}function jalali_to_gregorian(t,e,a){var i=t<=979?621:1600,n=365*(t-=t<=979?0:979)+8*parseInt(t/33)+parseInt((t%33+3)/4)+78+a+(e<7?31*(e-1):30*(e-7)+186);i+=400*parseInt(n/146097),(n%=146097)>36524&&(i+=100*parseInt(--n/36524),(n%=36524)>=365&&n++),i+=4*parseInt(n/1461),n%=1461,i+=parseInt((n-1)/365),n>365&&(n=(n-1)%365);var r,s=n+1,o=[0,31,i%4==0&&i%100!=0||i%400==0?29:28,31,30,31,30,31,31,30,31,30,31];for(r=0;r<13;r++){var _=o[r];if(s<=_)break;s-=_}return[i,r,s]}var Date=window.Date;function digits_fa2en(t){return t.replace(/[۰-۹]/g,(function(t){return String.fromCharCode(t.charCodeAt(0)-1728)}))}function pad2(t){return t<10?"0"+t:t}function parseDate(t,e){var a=/^(\d|\d\d|\d\d\d\d)(?:([-\/])(\d{1,2})(?:\2(\d|\d\d|\d\d\d\d))?)?(([ T])(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d+))?)?(Z|([+-])(\d{2})(?::?(\d{2}))?)?)?$/.exec(t);if(a){var i=a[2],n=a[6],r=+a[1],s=+a[3]||1,o=+a[4]||1,_="/"!=i&&" "!=a[6],d=+a[7]||0,h=+a[8]||0,p=+a[9]||0,u=1e3*+("0."+(a[10]||"0")),c=a[11],g=_&&(c||!a[5]),D=("-"==a[12]?-1:1)*(60*(+a[13]||0)+(+a[14]||0));if((!c&&"T"!=n||_)&&o>=1e3!=r>=1e3){if(o>=1e3){if("-"==i)return;r=o=+a[1]}if(e){var l=jalali_to_gregorian(r,s,o);r=l[0],s=l[1],o=l[2]}var f=new Date(r,s-1,o,d,h,p,u);return g&&f.setUTCMinutes(f.getUTCMinutes()-f.getTimezoneOffset()+D),f}}}function JDate(t,e,a,i,n,r,s){if("string"==typeof t){if(this._d=parseDate(digits_fa2en(t),!0),!this._d)throw"Cannot parse date string"}else if(0==arguments.length)this._d=new Date;else if(1==arguments.length)this._d=new Date(t instanceof JDate?t._d:t);else{var o=jalali_to_gregorian(t,(e||0)+1,a||1);this._d=new Date(o[0],o[1]-1,o[2],i||0,n||0,r||0,s||0)}this._date=this._d,this._cached_date_ts=null,this._cached_date=[0,0,0],this._cached_utc_date_ts=null,this._cached_utc_date=[0,0,0]}JDate.prototype={_persianDate:function(){return this._cached_date_ts!=+this._d&&(this._cached_date_ts=+this._d,this._cached_date=gregorian_to_jalali(this._d.getFullYear(),this._d.getMonth()+1,this._d.getDate())),this._cached_date},_persianUTCDate:function(){return this._cached_utc_date_ts!=+this._d&&(this._cached_utc_date_ts=+this._d,this._cached_utc_date=gregorian_to_jalali(this._d.getUTCFullYear(),this._d.getUTCMonth()+1,this._d.getUTCDate())),this._cached_utc_date},_setPersianDate:function(t,e,a){var i=this._persianDate();i[t]=e,void 0!==a&&(i[2]=a);var n=jalali_to_gregorian(i[0],i[1],i[2]);this._d.setFullYear(n[0]),this._d.setMonth(n[1]-1,n[2])},_setUTCPersianDate:function(t,e,a){var i=this._persianUTCDate();void 0!==a&&(i[2]=a),i[t]=e;var n=jalali_to_gregorian(i[0],i[1],i[2]);this._d.setUTCFullYear(n[0]),this._d.setUTCMonth(n[1]-1,n[2])}},JDate.prototype.getDate=function(){return this._persianDate()[2]},JDate.prototype.getMonth=function(){return this._persianDate()[1]-1},JDate.prototype.getFullYear=function(){return this._persianDate()[0]},JDate.prototype.getUTCDate=function(){return this._persianUTCDate()[2]},JDate.prototype.getUTCMonth=function(){return this._persianUTCDate()[1]-1},JDate.prototype.getUTCFullYear=function(){return this._persianUTCDate()[0]},JDate.prototype.setDate=function(t){this._setPersianDate(2,t)},JDate.prototype.setFullYear=function(t){this._setPersianDate(0,t)},JDate.prototype.setMonth=function(t,e){this._setPersianDate(1,t+1,e)},JDate.prototype.setUTCDate=function(t){this._setUTCPersianDate(2,t)},JDate.prototype.setUTCFullYear=function(t){this._setUTCPersianDate(0,t)},JDate.prototype.setUTCMonth=function(t,e){this._setUTCPersianDate(1,t+1,e)},JDate.prototype.toLocaleString=function(){return this.getFullYear()+"/"+pad2(this.getMonth()+1)+"/"+pad2(this.getDate())+" "+pad2(this.getHours())+":"+pad2(this.getMinutes())+":"+pad2(this.getSeconds())},JDate.now=Date.now,JDate.parse=function(t){new JDate(t).getTime()},JDate.UTC=function(t,e,a,i,n,r,s){var o=jalali_to_gregorian(t,e+1,a||1);return Date.UTC(o[0],o[1]-1,o[2],i||0,n||0,r||0,s||0)};var i,dateProps="getHours getMilliseconds getMinutes getSeconds getTime getUTCDay getUTCHours getTimezoneOffset getUTCMilliseconds getUTCMinutes getUTCSeconds setHours setMilliseconds setMinutes setSeconds setTime setUTCHours setUTCMilliseconds setUTCMinutes setUTCSeconds toDateString toISOString toJSON toString toLocaleDateString toLocaleTimeString toTimeString toUTCString valueOf getDay".split(" "),createWrapper=function(t){return function(){return this._d[t].apply(this._d,arguments)}};for(i=0;i<dateProps.length;i++)JDate.prototype[dateProps[i]]=createWrapper(dateProps[i]);window.JDate=JDate;